<!doctype html>
<html lang="en">
<head>
    <title>Add dashcam video</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        .container {
            display: flex;
            justify-content: space-between;
        }
        .left, .right {
            width: 48%;
        }
        .left {
            padding: 15px;
/*            height: 90vh;*/
            overflow-y: auto;
        }
        .right {
            width: 48%;
        }
        .videos-text {
            word-wrap: break-word;
            white-space: normal;
            flex: 1;
            font-size: 14px;
            margin-right: 10px;
            line-height: 1.2; /* adjust line spacing */
            padding: 2px 0;   /* reduce top/bottom padding */
            margin: 0;        /* remove extra margin */
            overflow: hidden; /* prevent text overflow */
        }
        .message {
            color: green;
            margin-top: 20px;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .form-container h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 2px;
        }
        .form-group label {
            flex: 1;
            font-size: 16px;
            margin-right: 10px;
        }
        .form-group input,
        .form-group select {
            flex: 2;
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
        }
        .form-group input[type="text"] {
            text-align: left;
        }
        .form-group select {
            background-color: #fff;
        }
        .form-group button {
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            background-color: #007bff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .form-group button:hover {
            background-color: #0056b3;
        }

        #embeddedVideo {
            width: 100%;
            height: 50%;
            max-height: 500px;
        }

        #map {
            width: 100%;
            height: 40%; /* ensure height is explicitly set */
            max-height: 400px;
        }

        .short_row {
            line-height: 1.2; /* adjust line spacing */
            padding: 2px 0;   /* reduce top/bottom padding */
            margin: 0;        /* remove extra margin */
            font-size: 16px;  /* adjust font size if needed */
            overflow: hidden; /* prevent text overflow */
/*            max-height: 20px; /* optional: limit max height */*/
        }

        #currentTime {
            color: red;
        }
    </style>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player; // global youtube player variable

        function onYouTubeIframeAPIReady() {
            console.log("YouTube API Ready");
            initializePlayer();
        }

        function initializePlayer() {
            const videoElement = document.getElementById('embeddedVideo');

            // check if the iframe exists and has the correct API enabled
            if (videoElement) {
                player = new YT.Player('embeddedVideo', {
                    events: {
                        'onReady': function() {
                            console.log("YouTube Player Ready");
                            updateCurrentTime();
                        },
                        'onStateChange': onPlayerStateChange
                    }
                });
            }
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                updateCurrentTime();
            }
        }

        function updateCurrentTime() {
            if (player && player.getCurrentTime) {
                let timeDisplay = document.getElementById('currentTime');
                if (timeDisplay) {
                    timeDisplay.textContent = Math.floor(player.getCurrentTime());
                }
                setTimeout(updateCurrentTime, 1000);
            }
        }

        // Wait for the DOM to fully load
        document.addEventListener('DOMContentLoaded', function() {
            const fetchDataButton = document.getElementById('fetchDataButton');
            const embeddedVideo = document.getElementById('embeddedVideo');

            fetchDataButton.addEventListener('click', function () {
                fetch('/fetch_video', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.video_id) {
                        console.log("New video fetched:", data.video_id);
                        embeddedVideo.src = `https://www.youtube.com/embed/${data.video_id}?enablejsapi=1&autoplay=1&mute=1`;

                        // wait for iframe to load before re-initializing player
                        embeddedVideo.onload = function () {
                            console.log("Iframe loaded, reinitializing player");
                            initializePlayer(); // reinitialize player after fetching new video
                        };
                    } else {
                        alert('Failed to fetch video.');
                    }
                })
                .catch(error => console.error('Error:', error));
            });

            // if the iframe already exists, initialize player immediately
            if (typeof YT !== 'undefined' && YT.Player) {
                initializePlayer();
            }
            
            let lat = parseFloat("{{ existing_data['lat'] or 52.3676 }}");
            let lon = parseFloat("{{ existing_data['lon'] or 4.9041 }}");

            let mapElement = document.getElementById("map");
            let latInput = document.getElementById("lat");
            let lonInput = document.getElementById("lon");

            if (mapElement && latInput && lonInput) {
                console.log("Initializing map at:", lat, lon);

                let map = L.map("map").setView([lat, lon], 13);

                L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
                    attribution: "&copy; OpenStreetMap contributors",
                    detectRetina: true,
                    maxZoom: 18,
                }).addTo(map);

                let marker = L.marker([lat, lon], { draggable: true }).addTo(map);

                // update input fields when marker is dragged
                marker.on("dragend", function(event) {
                    let position = marker.getLatLng();
                    latInput.value = position.lat.toFixed(6);
                    lonInput.value = position.lng.toFixed(6);
                    console.log("Updated position:", position.lat, position.lng);
                });

                // update marker if user manually changes lat/lon in the inputs
                function updateMarkerPosition() {
                    let newLat = parseFloat(latInput.value);
                    let newLon = parseFloat(lonInput.value);
                    if (!isNaN(newLat) && !isNaN(newLon)) {
                        marker.setLatLng([newLat, newLon]);
                        map.setView([newLat, newLon], 13);
                    }
                }

                latInput.addEventListener("change", updateMarkerPosition);
                lonInput.addEventListener("change", updateMarkerPosition);
            } else {
                console.error("Map element or input fields not found!");
            }

        });
    </script>
</head>
<body>
    <div class="container">
        <div class="left">
            <form method="POST">
                <div class="form-group">
                    <label for="city">City:</label>
                    <input type="text" id="city" name="city" value="{{ city }}" required>
                </div>

                <div class="form-group">
                    <label for="state">State (optional):</label>
                    <input type="text" id="state" name="state" value="{{ state }}">
                </div>

                <div class="form-group">
                    <label for="country">Country:</label>
                    <!-- <input type="text" id="country" name="country" value="{{ country }}" required> -->
                    <select id="country" name="country" value="{{ country }}" required name="country">
                        <option value="">Select a country</option>
                        <option value="Afghanistan" {{ "selected" if country == "Afghanistan" else "" }}>Afghanistan ðŸ‡¦ðŸ‡«</option>
                        <option value="Albania" {{ "selected" if country == "Albania" else "" }}>Albania ðŸ‡¦ðŸ‡±</option>
                        <option value="Algeria" {{ "selected" if country == "Algeria" else "" }}>Algeria ðŸ‡©ðŸ‡¿</option>
                        <option value="Ã…land Islands" {{ "selected" if country == "Ã…land Islands" else "" }}>Aland Islands ðŸ‡¦ðŸ‡½</option>
                        <option value="American Samoa" {{ "selected" if country == "American Samoa" else "" }}>American Samoa ðŸ‡¦ðŸ‡¸</option>
                        <option value="Andorra" {{ "selected" if country == "Andorra" else "" }}>Andorra ðŸ‡¦ðŸ‡©</option>
                        <option value="Angola" {{ "selected" if country == "Angola" else "" }}>Angola ðŸ‡¦ðŸ‡´</option>
                        <option value="Anguilla" {{ "selected" if country == "Anguilla" else "" }}>Anguilla ðŸ‡¦ðŸ‡®</option>
                        <option value="Antarctica" {{ "selected" if country == "Antarctica" else "" }}>Antarctica ðŸ‡¦ðŸ‡¶</option>
                        <option value="Antigua and Barbuda" {{ "selected" if country == "Antigua and Barbuda" else "" }}>Antigua and Barbuda ðŸ‡¦ðŸ‡¬</option>
                        <option value="Argentina" {{ "selected" if country == "Argentina" else "" }}>Argentina ðŸ‡¦ðŸ‡·</option>
                        <option value="Armenia" {{ "selected" if country == "Armenia" else "" }}>Armenia ðŸ‡¦ðŸ‡²</option>
                        <option value="Aruba" {{ "selected" if country == "Aruba" else "" }}>Aruba ðŸ‡¦ðŸ‡¼</option>
                        <option value="Australia" {{ "selected" if country == "Australia" else "" }}>Australia ðŸ‡¦ðŸ‡º</option>
                        <option value="Austria" {{ "selected" if country == "Austria" else "" }}>Austria ðŸ‡¦ðŸ‡¹</option>
                        <option value="Azerbaijan" {{ "selected" if country == "Azerbaijan" else "" }}>Azerbaijan ðŸ‡¦ðŸ‡¿</option>
                        <option value="Bahamas" {{ "selected" if country == "Bahamas" else "" }}>Bahamas ðŸ‡§ðŸ‡¸</option>
                        <option value="Bahrain" {{ "selected" if country == "Bahrain" else "" }}>Bahrain ðŸ‡§ðŸ‡­</option>
                        <option value="Bangladesh" {{ "selected" if country == "Bangladesh" else "" }}>Bangladesh ðŸ‡§ðŸ‡©</option>
                        <option value="Barbados" {{ "selected" if country == "Barbados" else "" }}>Barbados ðŸ‡§ðŸ‡§</option>
                        <option value="Belarus" {{ "selected" if country == "Belarus" else "" }}>Belarus ðŸ‡§ðŸ‡¾</option>
                        <option value="Belgium" {{ "selected" if country == "Belgium" else "" }}>Belgium ðŸ‡§ðŸ‡ª</option>
                        <option value="Belize" {{ "selected" if country == "Belize" else "" }}>Belize ðŸ‡§ðŸ‡¿</option>
                        <option value="Benin" {{ "selected" if country == "Benin" else "" }}>Benin ðŸ‡§ðŸ‡¯</option>
                        <option value="Bermuda" {{ "selected" if country == "Bermuda" else "" }}>Bermuda ðŸ‡§ðŸ‡²</option>
                        <option value="Bhutan" {{ "selected" if country == "Bhutan" else "" }}>Bhutan ðŸ‡§ðŸ‡¹</option>
                        <option value="Bolivia" {{ "selected" if country == "Bolivia" else "" }}>Bolivia ðŸ‡§ðŸ‡´</option>
                        <option value="Bonaire, Sint Eustatius and Saba" {{ "selected" if country == "Bonaire, Sint Eustatius and Saba" else "" }}>Bonaire, Sint Eustatius and Saba ðŸ‡§ðŸ‡¶</option>
                        <option value="Bosnia and Herzegovina" {{ "selected" if country == "Bosnia and Herzegovina" else "" }}>Bosnia and Herzegovina ðŸ‡§ðŸ‡¦</option>
                        <option value="Botswana" {{ "selected" if country == "Botswana" else "" }}>Botswana ðŸ‡§ðŸ‡¼</option>
                        <option value="Bouvet Island" {{ "selected" if country == "Bouvet Island" else "" }}>Bouvet Island ðŸ‡§ðŸ‡»</option>
                        <option value="Brazil" {{ "selected" if country == "Brazil" else "" }}>Brazil ðŸ‡§ðŸ‡·</option>
                        <option value="British Indian Ocean Territory" {{ "selected" if country == "British Indian Ocean Territory" else "" }}>British Indian Ocean Territory ðŸ‡®ðŸ‡´</option>
                        <option value="British Virgin Islands" {{ "selected" if country == "British Virgin Islands" else "" }}>British Virgin Islands ðŸ‡»ðŸ‡¬</option>
                        <option value="Brunei" {{ "selected" if country == "Brunei" else "" }}>Brunei ðŸ‡§ðŸ‡³</option>
                        <option value="Bulgaria" {{ "selected" if country == "Bulgaria" else "" }}>Bulgaria ðŸ‡§ðŸ‡¬</option>
                        <option value="Burkina Faso" {{ "selected" if country == "Burkina Faso" else "" }}>Burkina Faso ðŸ‡§ðŸ‡«</option>
                        <option value="Burundi" {{ "selected" if country == "Burundi" else "" }}>Burundi ðŸ‡§ðŸ‡®</option>
                        <option value="Cabo Verde" {{ "selected" if country == "Cabo Verde" else "" }}>Cabo Verde ðŸ‡¨ðŸ‡»</option>
                        <option value="Cambodia" {{ "selected" if country == "Cambodia" else "" }}>Cambodia ðŸ‡°ðŸ‡­</option>
                        <option value="Cameroon" {{ "selected" if country == "Cameroon" else "" }}>Cameroon ðŸ‡¨ðŸ‡²</option>
                        <option value="Canada" {{ "selected" if country == "Canada" else "" }}>Canada ðŸ‡¨ðŸ‡¦</option>
                        <option value="Cayman Islands" {{ "selected" if country == "Cayman Islands" else "" }}>Cayman Islands ðŸ‡°ðŸ‡¾</option>
                        <option value="Central African Republic" {{ "selected" if country == "Central African Republic" else "" }}>Central African Republic ðŸ‡¨ðŸ‡«</option>
                        <option value="Chad" {{ "selected" if country == "Chad" else "" }}>Chad ðŸ‡¹ðŸ‡©</option>
                        <option value="Chile" {{ "selected" if country == "Chile" else "" }}>Chile ðŸ‡¨ðŸ‡±</option>
                        <option value="China" {{ "selected" if country == "China" else "" }}>China ðŸ‡¨ðŸ‡³</option>
                        <option value="Christmas Island" {{ "selected" if country == "Christmas Island" else "" }}>Christmas Island ðŸ‡¨ðŸ‡½</option>
                        <option value="Cocos Islands" {{ "selected" if country == "Cocos Islands" else "" }}>Cocos Islands ðŸ‡¨ðŸ‡¨</option>
                        <option value="Colombia" {{ "selected" if country == "Colombia" else "" }}>Colombia ðŸ‡¨ðŸ‡´</option>
                        <option value="Comoros" {{ "selected" if country == "Comoros" else "" }}>Comoros ðŸ‡°ðŸ‡²</option>
                        <option value="Congo (Congo-Brazzaville)" {{ "selected" if country == "Congo (Congo-Brazzaville)" else "" }}>Congo (Congo-Brazzaville) ðŸ‡¨ðŸ‡¬</option>
                        <option value="Congo (Democratic Republic)" {{ "selected" if country == "Congo (Democratic Republic)" else "" }}>Congo (Democratic Republic) ðŸ‡¨ðŸ‡©</option>
                        <option value="Cook Islands" {{ "selected" if country == "Cook Islands" else "" }}>Cook Islands ðŸ‡¨ðŸ‡°</option>
                        <option value="Costa Rica" {{ "selected" if country == "Costa Rica" else "" }}>Costa Rica ðŸ‡¨ðŸ‡·</option>
                        <option value="CÃ´te d'Ivoire" {{ "selected" if country == "CÃ´te d'Ivoire" else "" }}>CÃ´te d'Ivoire ðŸ‡¨ðŸ‡®</option>
                        <option value="Croatia" {{ "selected" if country == "Croatia" else "" }}>Croatia ðŸ‡­ðŸ‡·</option>
                        <option value="Cuba" {{ "selected" if country == "Cuba" else "" }}>Cuba ðŸ‡¨ðŸ‡º</option>
                        <option value="CuraÃ§ao" {{ "selected" if country == "CuraÃ§ao" else "" }}>CuraÃ§ao ðŸ‡¨ðŸ‡¼</option>
                        <option value="Cyprus" {{ "selected" if country == "Cyprus" else "" }}>Cyprus ðŸ‡¨ðŸ‡¾</option>
                        <option value="Czechia" {{ "selected" if country == "Czechia" else "" }}>Czechia ðŸ‡¨ðŸ‡¿</option>
                        <option value="Denmark" {{ "selected" if country == "Denmark" else "" }}>Denmark ðŸ‡©ðŸ‡°</option>
                        <option value="Djibouti" {{ "selected" if country == "Djibouti" else "" }}>Djibouti ðŸ‡©ðŸ‡¯</option>
                        <option value="Dominica" {{ "selected" if country == "Dominica" else "" }}>Dominica ðŸ‡©ðŸ‡²</option>
                        <option value="Dominican Republic" {{ "selected" if country == "Dominican Republic" else "" }}>Dominican Republic ðŸ‡©ðŸ‡´</option>
                        <option value="Ecuador" {{ "selected" if country == "Ecuador" else "" }}>Ecuador ðŸ‡ªðŸ‡¨</option>
                        <option value="Egypt" {{ "selected" if country == "Egypt" else "" }}>Egypt ðŸ‡ªðŸ‡¬</option>
                        <option value="El Salvador" {{ "selected" if country == "El Salvador" else "" }}>El Salvador ðŸ‡¸ðŸ‡»</option>
                        <option value="Equatorial Guinea" {{ "selected" if country == "Equatorial Guinea" else "" }}>Equatorial Guinea ðŸ‡¬ðŸ‡¶</option>
                        <option value="Eritrea" {{ "selected" if country == "Eritrea" else "" }}>Eritrea ðŸ‡ªðŸ‡·</option>
                        <option value="Estonia" {{ "selected" if country == "Estonia" else "" }}>Estonia ðŸ‡ªðŸ‡ª</option>
                        <option value="Eswatini" {{ "selected" if country == "Eswatini" else "" }}>Eswatini ðŸ‡¸ðŸ‡¿</option>
                        <option value="Ethiopia" {{ "selected" if country == "Ethiopia" else "" }}>Ethiopia ðŸ‡ªðŸ‡¹</option>
                        <option value="Falkland Islands" {{ "selected" if country == "Falkland Islands" else "" }}>Falkland Islands ðŸ‡«ðŸ‡°</option>
                        <option value="Faroe Islands" {{ "selected" if country == "Faroe Islands" else "" }}>Faroe Islands ðŸ‡«ðŸ‡´</option>
                        <option value="Fiji" {{ "selected" if country == "Fiji" else "" }}>Fiji ðŸ‡«ðŸ‡¯</option>
                        <option value="Finland" {{ "selected" if country == "Finland" else "" }}>Finland ðŸ‡«ðŸ‡®</option>
                        <option value="France" {{ "selected" if country == "France" else "" }}>France ðŸ‡«ðŸ‡·</option>
                        <option value="French Guiana" {{ "selected" if country == "French Guiana" else "" }}>French Guiana ðŸ‡¬ðŸ‡«</option>
                        <option value="French Polynesia" {{ "selected" if country == "French Polynesia" else "" }}>French Polynesia ðŸ‡µðŸ‡«</option>
                        <option value="Gabon" {{ "selected" if country == "Gabon" else "" }}>Gabon ðŸ‡¬ðŸ‡¦</option>
                        <option value="Gambia" {{ "selected" if country == "Gambia" else "" }}>Gambia ðŸ‡¬ðŸ‡²</option>
                        <option value="Georgia" {{ "selected" if country == "Georgia" else "" }}>Georgia ðŸ‡¬ðŸ‡ª</option>
                        <option value="Germany" {{ "selected" if country == "Germany" else "" }}>Germany ðŸ‡©ðŸ‡ª</option>
                        <option value="Ghana" {{ "selected" if country == "Ghana" else "" }}>Ghana ðŸ‡¬ðŸ‡­</option>
                        <option value="Gibraltar" {{ "selected" if country == "Gibraltar" else "" }}>Gibraltar ðŸ‡¬ðŸ‡®</option>
                        <option value="Greece" {{ "selected" if country == "Greece" else "" }}>Greece ðŸ‡¬ðŸ‡·</option>
                        <option value="Greenland" {{ "selected" if country == "Greenland" else "" }}>Greenland ðŸ‡¬ðŸ‡±</option>
                        <option value="Grenada" {{ "selected" if country == "Grenada" else "" }}>Grenada ðŸ‡¬ðŸ‡©</option>
                        <option value="Guadeloupe" {{ "selected" if country == "Guadeloupe" else "" }}>Guadeloupe ðŸ‡¬ðŸ‡º</option>
                        <option value="Guam" {{ "selected" if country == "Guam" else "" }}>Guam ðŸ‡¬ðŸ‡º</option>
                        <option value="Guatemala" {{ "selected" if country == "Guatemala" else "" }}>Guatemala ðŸ‡¬ðŸ‡¹</option>
                        <option value="Guernsey" {{ "selected" if country == "Guernsey" else "" }}>Guernsey ðŸ‡¬ðŸ‡¬</option>
                        <option value="Guinea" {{ "selected" if country == "Guinea" else "" }}>Guinea ðŸ‡¬ðŸ‡³</option>
                        <option value="Guinea-Bissau" {{ "selected" if country == "Guinea-Bissau" else "" }}>Guinea-Bissau ðŸ‡¬ðŸ‡¼</option>
                        <option value="Guyana" {{ "selected" if country == "Guyana" else "" }}>Guyana ðŸ‡¬ðŸ‡¾</option>
                        <option value="Haiti" {{ "selected" if country == "Haiti" else "" }}>Haiti ðŸ‡­ðŸ‡¹</option>
                        <option value="Heard Island and McDonald Islands" {{ "selected" if country == "Heard Island and McDonald Islands" else "" }}>Heard Island and McDonald Islands ðŸ‡­ðŸ‡²</option>
                        <option value="Honduras" {{ "selected" if country == "Honduras" else "" }}>Honduras ðŸ‡­ðŸ‡³</option>
                        <option value="Hong Kong" {{ "selected" if country == "Hong Kong" else "" }}>Hong Kong ðŸ‡­ðŸ‡°</option>
                        <option value="Hungary" {{ "selected" if country == "Hungary" else "" }}>Hungary ðŸ‡­ðŸ‡º</option>
                        <option value="Iceland" {{ "selected" if country == "Iceland" else "" }}>Iceland ðŸ‡®ðŸ‡¸</option>
                        <option value="India" {{ "selected" if country == "India" else "" }}>India ðŸ‡®ðŸ‡³</option>
                        <option value="Indonesia" {{ "selected" if country == "Indonesia" else "" }}>Indonesia ðŸ‡®ðŸ‡©</option>
                        <option value="Iran" {{ "selected" if country == "Iran" else "" }}>Iran ðŸ‡®ðŸ‡·</option>
                        <option value="Iraq" {{ "selected" if country == "Iraq" else "" }}>Iraq ðŸ‡®ðŸ‡¶</option>
                        <option value="Ireland" {{ "selected" if country == "Ireland" else "" }}>Ireland ðŸ‡®ðŸ‡ª</option>
                        <option value="Isle of Man" {{ "selected" if country == "Isle of Man" else "" }}>Isle of Man ðŸ‡®ðŸ‡²</option>
                        <option value="Israel" {{ "selected" if country == "Israel" else "" }}>Israel ðŸ‡®ðŸ‡±</option>
                        <option value="Italy" {{ "selected" if country == "Italy" else "" }}>Italy ðŸ‡®ðŸ‡¹</option>
                        <option value="Jamaica" {{ "selected" if country == "Jamaica" else "" }}>Jamaica ðŸ‡¯ðŸ‡²</option>
                        <option value="Japan" {{ "selected" if country == "Japan" else "" }}>Japan ðŸ‡¯ðŸ‡µ</option>
                        <option value="Jersey" {{ "selected" if country == "Jersey" else "" }}>Jersey ðŸ‡¯ðŸ‡ª</option>
                        <option value="Jordan" {{ "selected" if country == "Jordan" else "" }}>Jordan ðŸ‡¯ðŸ‡´</option>
                        <option value="Kazakhstan" {{ "selected" if country == "Kazakhstan" else "" }}>Kazakhstan ðŸ‡°ðŸ‡¿</option>
                        <option value="Kenya" {{ "selected" if country == "Kenya" else "" }}>Kenya ðŸ‡°ðŸ‡ª</option>
                        <option value="Kiribati" {{ "selected" if country == "Kiribati" else "" }}>Kiribati ðŸ‡°ðŸ‡®</option>
                        <option value="Kosovo" {{ "selected" if country == "Kosovo" else "" }}>Kosovo ðŸ‡½ðŸ‡°</option>
                        <option value="Kuwait" {{ "selected" if country == "Kuwait" else "" }}>Kuwait ðŸ‡°ðŸ‡¼</option>
                        <option value="Kyrgyzstan" {{ "selected" if country == "Kyrgyzstan" else "" }}>Kyrgyzstan ðŸ‡°ðŸ‡¬</option>
                        <option value="Laos" {{ "selected" if country == "Laos" else "" }}>Laos ðŸ‡±ðŸ‡¦</option>
                        <option value="Latvia" {{ "selected" if country == "Latvia" else "" }}>Latvia ðŸ‡±ðŸ‡»</option>
                        <option value="Lebanon" {{ "selected" if country == "Lebanon" else "" }}>Lebanon ðŸ‡±ðŸ‡§</option>
                        <option value="Lesotho" {{ "selected" if country == "Lesotho" else "" }}>Lesotho ðŸ‡±ðŸ‡¸</option>
                        <option value="Liberia" {{ "selected" if country == "Liberia" else "" }}>Liberia ðŸ‡±ðŸ‡·</option>
                        <option value="Libya" {{ "selected" if country == "Libya" else "" }}>Libya ðŸ‡±ðŸ‡¾</option>
                        <option value="Liechtenstein" {{ "selected" if country == "Liechtenstein" else "" }}>Liechtenstein ðŸ‡±ðŸ‡®</option>
                        <option value="Lithuania" {{ "selected" if country == "Lithuania" else "" }}>Lithuania ðŸ‡±ðŸ‡¹</option>
                        <option value="Luxembourg" {{ "selected" if country == "Luxembourg" else "" }}>Luxembourg ðŸ‡±ðŸ‡º</option>
                        <option value="Macau" {{ "selected" if country == "Macau" else "" }}>Macau ðŸ‡²ðŸ‡´</option>
                        <option value="Madagascar" {{ "selected" if country == "Madagascar" else "" }}>Madagascar ðŸ‡²ðŸ‡¬</option>
                        <option value="Malawi" {{ "selected" if country == "Malawi" else "" }}>Malawi ðŸ‡²ðŸ‡¼</option>
                        <option value="Malaysia" {{ "selected" if country == "Malaysia" else "" }}>Malaysia ðŸ‡²ðŸ‡¾</option>
                        <option value="Maldives" {{ "selected" if country == "Maldives" else "" }}>Maldives ðŸ‡²ðŸ‡»</option>
                        <option value="Mali" {{ "selected" if country == "Mali" else "" }}>Mali ðŸ‡²ðŸ‡±</option>
                        <option value="Malta" {{ "selected" if country == "Malta" else "" }}>Malta ðŸ‡²ðŸ‡¹</option>
                        <option value="Marshall Islands" {{ "selected" if country == "Marshall Islands" else "" }}>Marshall Islands ðŸ‡²ðŸ‡­</option>
                        <option value="Martinique" {{ "selected" if country == "Martinique" else "" }}>Martinique ðŸ‡²ðŸ‡¶</option>
                        <option value="Mauritania" {{ "selected" if country == "Mauritania" else "" }}>Mauritania ðŸ‡²ðŸ‡·</option>
                        <option value="Mauritius" {{ "selected" if country == "Mauritius" else "" }}>Mauritius ðŸ‡²ðŸ‡º</option>
                        <option value="Mayotte" {{ "selected" if country == "Mayotte" else "" }}>Mayotte ðŸ‡¾ðŸ‡¹</option>
                        <option value="Mexico" {{ "selected" if country == "Mexico" else "" }}>Mexico ðŸ‡²ðŸ‡½</option>
                        <option value="Micronesia" {{ "selected" if country == "Micronesia" else "" }}>Micronesia ðŸ‡«ðŸ‡²</option>
                        <option value="Moldova" {{ "selected" if country == "Moldova" else "" }}>Moldova ðŸ‡²ðŸ‡©</option>
                        <option value="Monaco" {{ "selected" if country == "Monaco" else "" }}>Monaco ðŸ‡²ðŸ‡¨</option>
                        <option value="Mongolia" {{ "selected" if country == "Mongolia" else "" }}>Mongolia ðŸ‡²ðŸ‡³</option>
                        <option value="Montenegro" {{ "selected" if country == "Montenegro" else "" }}>Montenegro ðŸ‡²ðŸ‡ª</option>
                        <option value="Montserrat" {{ "selected" if country == "Montserrat" else "" }}>Montserrat ðŸ‡²ðŸ‡¸</option>
                        <option value="Morocco" {{ "selected" if country == "Morocco" else "" }}>Morocco ðŸ‡²ðŸ‡¦</option>
                        <option value="Mozambique" {{ "selected" if country == "Mozambique" else "" }}>Mozambique ðŸ‡²ðŸ‡¿</option>
                        <option value="Myanmar" {{ "selected" if country == "Myanmar" else "" }}>Myanmar (Burma) ðŸ‡²ðŸ‡²</option>
                        <option value="Namibia" {{ "selected" if country == "Namibia" else "" }}>Namibia ðŸ‡³ðŸ‡¦</option>
                        <option value="Nauru" {{ "selected" if country == "Nauru" else "" }}>Nauru ðŸ‡³ðŸ‡·</option>
                        <option value="Nepal" {{ "selected" if country == "Nepal" else "" }}>Nepal ðŸ‡³ðŸ‡µ</option>
                        <option value="Netherlands" {{ "selected" if country == "Netherlands" else "" }}>Netherlands ðŸ‡³ðŸ‡±</option>
                        <option value="New Caledonia" {{ "selected" if country == "New Caledonia" else "" }}>New Caledonia ðŸ‡³ðŸ‡¨</option>
                        <option value="New Zealand" {{ "selected" if country == "New Zealand" else "" }}>New Zealand ðŸ‡³ðŸ‡¿</option>
                        <option value="Nicaragua" {{ "selected" if country == "Nicaragua" else "" }}>Nicaragua ðŸ‡³ðŸ‡®</option>
                        <option value="Niger" {{ "selected" if country == "Niger" else "" }}>Niger ðŸ‡³ðŸ‡ª</option>
                        <option value="Nigeria" {{ "selected" if country == "Nigeria" else "" }}>Nigeria ðŸ‡³ðŸ‡¬</option>
                        <option value="Niue" {{ "selected" if country == "Niue" else "" }}>Niue ðŸ‡³ðŸ‡º</option>
                        <option value="Norfolk Island" {{ "selected" if country == "Norfolk Island" else "" }}>Norfolk Island ðŸ‡³ðŸ‡«</option>
                        <option value="North Korea" {{ "selected" if country == "North Korea" else "" }}>North Korea ðŸ‡°ðŸ‡µ</option>
                        <option value="North Macedonia" {{ "selected" if country == "North Macedonia" else "" }}>North Macedonia ðŸ‡²ðŸ‡°</option>
                        <option value="Northern Mariana Islands" {{ "selected" if country == "Northern Mariana Islands" else "" }}>Northern Mariana Islands ðŸ‡²ðŸ‡µ</option>
                        <option value="Norway" {{ "selected" if country == "Norway" else "" }}>Norway ðŸ‡³ðŸ‡´</option>
                        <option value="Oman" {{ "selected" if country == "Oman" else "" }}>Oman ðŸ‡´ðŸ‡²</option>
                        <option value="Pakistan" {{ "selected" if country == "Pakistan" else "" }}>Pakistan ðŸ‡µðŸ‡°</option>
                        <option value="Palau" {{ "selected" if country == "Palau" else "" }}>Palau ðŸ‡µðŸ‡¬</option>
                        <option value="Palestine" {{ "selected" if country == "Palestine" else "" }}>Palestine ðŸ‡µðŸ‡¸</option>
                        <option value="Panama" {{ "selected" if country == "Panama" else "" }}>Panama ðŸ‡µðŸ‡¦</option>
                        <option value="Papua New Guinea" {{ "selected" if country == "Papua New Guinea" else "" }}>Papua New Guinea ðŸ‡µðŸ‡¬</option>
                        <option value="Paraguay" {{ "selected" if country == "Paraguay" else "" }}>Paraguay ðŸ‡µðŸ‡¾</option>
                        <option value="Peru" {{ "selected" if country == "Peru" else "" }}>Peru ðŸ‡µðŸ‡ª</option>
                        <option value="Philippines" {{ "selected" if country == "Philippines" else "" }}>Philippines ðŸ‡µðŸ‡­</option>
                        <option value="Pitcairn Islands" {{ "selected" if country == "Pitcairn Islands" else "" }}>Pitcairn Islands ðŸ‡µðŸ‡¬</option>
                        <option value="Poland" {{ "selected" if country == "Poland" else "" }}>Poland ðŸ‡µðŸ‡±</option>
                        <option value="Portugal" {{ "selected" if country == "Portugal" else "" }}>Portugal ðŸ‡µðŸ‡¹</option>
                        <option value="Puerto Rico" {{ "selected" if country == "Puerto Rico" else "" }}>Puerto Rico ðŸ‡µðŸ‡·</option>
                        <option value="Qatar" {{ "selected" if country == "Qatar" else "" }}>Qatar ðŸ‡¶ðŸ‡¦</option>
                        <option value="RÃ©union" {{ "selected" if country == "RÃ©union" else "" }}>RÃ©union ðŸ‡·ðŸ‡ª</option>
                        <option value="Romania" {{ "selected" if country == "Romania" else "" }}>Romania ðŸ‡·ðŸ‡´</option>
                        <option value="Russia" {{ "selected" if country == "Russia" else "" }}>Russia ðŸ‡·ðŸ‡º</option>
                        <option value="Rwanda" {{ "selected" if country == "Rwanda" else "" }}>Rwanda ðŸ‡·ðŸ‡¼</option>
                        <option value="Saint BarthÃ©lemy" {{ "selected" if country == "Saint BarthÃ©lemy" else "" }}>Saint BarthÃ©lemy ðŸ‡§ðŸ‡±</option>
                        <option value="Saint Helena" {{ "selected" if country == "Saint Helena" else "" }}>Saint Helena ðŸ‡¸ðŸ‡­</option>
                        <option value="Saint Kitts and Nevis" {{ "selected" if country == "Saint Kitts and Nevis" else "" }}>Saint Kitts and Nevis ðŸ‡°ðŸ‡³</option>
                        <option value="Saint Lucia" {{ "selected" if country == "Saint Lucia" else "" }}>Saint Lucia ðŸ‡±ðŸ‡¨</option>
                        <option value="Saint Martin" {{ "selected" if country == "Saint Martin" else "" }}>Saint Martin ðŸ‡²ðŸ‡¶</option>
                        <option value="Saint Pierre and Miquelon" {{ "selected" if country == "Saint Pierre and Miquelon" else "" }}>Saint Pierre and Miquelon ðŸ‡µðŸ‡²</option>
                        <option value="Saint Vincent and the Grenadines" {{ "selected" if country == "Saint Vincent and the Grenadines" else "" }}>Saint Vincent and the Grenadines ðŸ‡»ðŸ‡¨</option>
                        <option value="Samoa" {{ "selected" if country == "Samoa" else "" }}>Samoa ðŸ‡¼ðŸ‡¸</option>
                        <option value="San Marino" {{ "selected" if country == "San Marino" else "" }}>San Marino ðŸ‡¸ðŸ‡²</option>
                        <option value="Sao Tome and Principe" {{ "selected" if country == "Sao Tome and Principe" else "" }}>Sao Tome and Principe ðŸ‡¸ðŸ‡¹</option>
                        <option value="Saudi Arabia" {{ "selected" if country == "Saudi Arabia" else "" }}>Saudi Arabia ðŸ‡¸ðŸ‡¦</option>
                        <option value="Senegal" {{ "selected" if country == "Senegal" else "" }}>Senegal ðŸ‡¸ðŸ‡³</option>
                        <option value="Serbia" {{ "selected" if country == "Serbia" else "" }}>Serbia ðŸ‡·ðŸ‡¸</option>
                        <option value="Seychelles" {{ "selected" if country == "Seychelles" else "" }}>Seychelles ðŸ‡¸ðŸ‡¨</option>
                        <option value="Sierra Leone" {{ "selected" if country == "Sierra Leone" else "" }}>Sierra Leone ðŸ‡¸ðŸ‡±</option>
                        <option value="Singapore" {{ "selected" if country == "Singapore" else "" }}>Singapore ðŸ‡¸ðŸ‡¬</option>
                        <option value="Sint Maarten" {{ "selected" if country == "Sint Maarten" else "" }}>Sint Maarten ðŸ‡¸ðŸ‡½</option>
                        <option value="Slovakia" {{ "selected" if country == "Slovakia" else "" }}>Slovakia ðŸ‡¸ðŸ‡°</option>
                        <option value="Slovenia" {{ "selected" if country == "Slovenia" else "" }}>Slovenia ðŸ‡¸ðŸ‡®</option>
                        <option value="Solomon Islands" {{ "selected" if country == "Solomon Islands" else "" }}>Solomon Islands ðŸ‡¸ðŸ‡§</option>
                        <option value="Somalia" {{ "selected" if country == "Somalia" else "" }}>Somalia ðŸ‡¸ðŸ‡´</option>
                        <option value="South Africa" {{ "selected" if country == "South Africa" else "" }}>South Africa ðŸ‡¿ðŸ‡¦</option>
                        <option value="South Georgia and the South Sandwich Islands" {{ "selected" if country == "South Georgia and the South Sandwich Islands" else "" }}>South Georgia and the South Sandwich Islands ðŸ‡¬ðŸ‡¸</option>
                        <option value="South Korea" {{ "selected" if country == "South Korea" else "" }}>South Korea ðŸ‡°ðŸ‡·</option>
                        <option value="South Sudan" {{ "selected" if country == "South Sudan" else "" }}>South Sudan ðŸ‡¸ðŸ‡¸</option>
                        <option value="Spain" {{ "selected" if country == "Spain" else "" }}>Spain ðŸ‡ªðŸ‡¸</option>
                        <option value="Sri Lanka" {{ "selected" if country == "Sri Lanka" else "" }}>Sri Lanka ðŸ‡±ðŸ‡°</option>
                        <option value="Sudan" {{ "selected" if country == "Sudan" else "" }}>Sudan ðŸ‡¸ðŸ‡©</option>
                        <option value="Suriname" {{ "selected" if country == "Suriname" else "" }}>Suriname ðŸ‡¸ðŸ‡·</option>
                        <option value="Svalbard and Jan Mayen" {{ "selected" if country == "Svalbard and Jan Mayen" else "" }}>Svalbard and Jan Mayen ðŸ‡¸ðŸ‡¯</option>
                        <option value="Sweden" {{ "selected" if country == "Sweden" else "" }}>Sweden ðŸ‡¸ðŸ‡ª</option>
                        <option value="Switzerland" {{ "selected" if country == "Switzerland" else "" }}>Switzerland ðŸ‡¨ðŸ‡­</option>
                        <option value="Syria" {{ "selected" if country == "Syria" else "" }}>Syria ðŸ‡¸ðŸ‡¾</option>
                        <option value="Taiwan" {{ "selected" if country == "Taiwan" else "" }}>Taiwan ðŸ‡¹ðŸ‡¼</option>
                        <option value="Tajikistan" {{ "selected" if country == "Tajikistan" else "" }}>Tajikistan ðŸ‡¹ðŸ‡¯</option>
                        <option value="Tanzania" {{ "selected" if country == "Tanzania" else "" }}>Tanzania ðŸ‡¹ðŸ‡¿</option>
                        <option value="Thailand" {{ "selected" if country == "Thailand" else "" }}>Thailand ðŸ‡¹ðŸ‡­</option>
                        <option value="Timor-Leste" {{ "selected" if country == "Timor-Leste" else "" }}>Timor-Leste ðŸ‡¹ðŸ‡±</option>
                        <option value="Togo" {{ "selected" if country == "Togo" else "" }}>Togo ðŸ‡¹ðŸ‡¬</option>
                        <option value="Tokelau" {{ "selected" if country == "Tokelau" else "" }}>Tokelau ðŸ‡¹ðŸ‡°</option>
                        <option value="Tonga" {{ "selected" if country == "Tonga" else "" }}>Tonga ðŸ‡¹ðŸ‡´</option>
                        <option value="Trinidad and Tobago" {{ "selected" if country == "Trinidad and Tobago" else "" }}>Trinidad and Tobago ðŸ‡¹ðŸ‡¹</option>
                        <option value="Tunisia" {{ "selected" if country == "Tunisia" else "" }}>Tunisia ðŸ‡¹ðŸ‡³</option>
                        <option value="TÃ¼rkiye" {{ "selected" if country == "TÃ¼rkiye" else "" }}>TÃ¼rkiye ðŸ‡¹ðŸ‡·</option>
                        <option value="Turkmenistan" {{ "selected" if country == "Turkmenistan" else "" }}>Turkmenistan ðŸ‡¹ðŸ‡²</option>
                        <option value="Turks and Caicos Islands" {{ "selected" if country == "Turks and Caicos Islands" else "" }}>Turks and Caicos Islands ðŸ‡¹ðŸ‡¨</option>
                        <option value="Tuvalu" {{ "selected" if country == "Tuvalu" else "" }}>Tuvalu ðŸ‡¹ðŸ‡»</option>
                        <option value="Uganda" {{ "selected" if country == "Uganda" else "" }}>Uganda ðŸ‡ºðŸ‡¬</option>
                        <option value="Ukraine" {{ "selected" if country == "Ukraine" else "" }}>Ukraine ðŸ‡ºðŸ‡¦</option>
                        <option value="United Arab Emirates" {{ "selected" if country == "United Arab Emirates" else "" }}>United Arab Emirates ðŸ‡¦ðŸ‡ª</option>
                        <option value="United Kingdom" {{ "selected" if country == "United Kingdom" else "" }}>United Kingdom ðŸ‡¬ðŸ‡§</option>
                        <option value="United States" {{ "selected" if country == "United States" else "" }}>United States ðŸ‡ºðŸ‡¸</option>
                        <option value="United States Virgin Islands" {{ "selected" if country == "United States Virgin Islands" else "" }}>United States Virgin Islands ðŸ‡»ðŸ‡®</option>
                        <option value="Uruguay" {{ "selected" if country == "Uruguay" else "" }}>Uruguay ðŸ‡ºðŸ‡¾</option>
                        <option value="Uzbekistan" {{ "selected" if country == "Uzbekistan" else "" }}>Uzbekistan ðŸ‡ºðŸ‡¿</option>
                        <option value="Vanuatu" {{ "selected" if country == "Vanuatu" else "" }}>Vanuatu ðŸ‡»ðŸ‡º</option>
                        <option value="Vatican City" {{ "selected" if country == "Vatican City" else "" }}>Vatican City ðŸ‡»ðŸ‡¦</option>
                        <option value="Venezuela" {{ "selected" if country == "Venezuela" else "" }}>Venezuela ðŸ‡»ðŸ‡ª</option>
                        <option value="Vietnam" {{ "selected" if country == "Vietnam" else "" }}>Vietnam ðŸ‡»ðŸ‡³</option>
                        <option value="Wallis and Futuna" {{ "selected" if country == "Wallis and Futuna" else "" }}>Wallis and Futuna ðŸ‡¼ðŸ‡«</option>
                        <option value="Western Sahara" {{ "selected" if country == "Western Sahara" else "" }}>Western Sahara ðŸ‡ªðŸ‡­</option>
                        <option value="Yemen" {{ "selected" if country == "Yemen" else "" }}>Yemen ðŸ‡¾ðŸ‡ª</option>
                        <option value="Zambia" {{ "selected" if country == "Zambia" else "" }}>Zambia ðŸ‡¿ðŸ‡²</option>
                        <option value="Zimbabwe" {{ "selected" if country == "Zimbabwe" else "" }}>Zimbabwe ðŸ‡¿ðŸ‡¼</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="video_url">YouTube video URL:</label>
                    <input type="url" id="video_url" name="video_url" value="{{ video_url }}" required>
                </div>

                <div class="form-group">
                    <button type="submit" name="fetch_data" id="fetchDataButton">Fetch data</button>
                </div>
            </form>

            <h3>{{ message }}</h3>

            {% if existing_data %}
            <!-- Form for submitting additional data -->
            <form method="POST">
                <input type="hidden" name="city" value="{{ city }}">
                <input type="hidden" name="state" value="{{ state }}">
                <input type="hidden" name="country" value="{{ country }}">
                <input type="hidden" name="video_url" value="{{ video_url }}">

                <div class="form-group">
                    <label for="time_of_day">Time of day:</label>
                    <select id="time_of_day" name="time_of_day">
                        <option value="0" {{ "selected" if time_of_day_video == 0 else "" }}>0 (day)</option>
                        <option value="1" {{ "selected" if time_of_day_video == 1 else "" }}>1 (night)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="vehicle_type">Vehicle:</label>
                    <select id="vehicle_type" name="vehicle_type">
                        <option value="0" {{ "selected" if vehicle_type_video == 0 else "" }}>0 (car)</option>
                        <option value="1" {{ "selected" if vehicle_type_video == 1 else "" }}>1 (bus)</option>
                        <option value="2" {{ "selected" if vehicle_type_video == 2 else "" }}>2 (truck)</option>
                        <option value="3" {{ "selected" if vehicle_type_video == 3 else "" }}>3 (two-wheeler)</option>
                        <option value="4" {{ "selected" if vehicle_type_video == 4 else "" }}>4 (bicycle)</option>
                        <option value="5" {{ "selected" if vehicle_type_video == 5 else "" }}>5 (automated car)</option>
                        <option value="6" {{ "selected" if vehicle_type_video == 6 else "" }}>6 (automated bus)</option>
                        <option value="7" {{ "selected" if vehicle_type_video == 7 else "" }}>7 (automated truck)</option>
                        <option value="8" {{ "selected" if vehicle_type_video == 8 else "" }}>8 (automated two-wheeler)</option>
                        <option value="9" {{ "selected" if vehicle_type_video == 9 else "" }}>9 (electric scooter)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="start_time">Start time (seconds):</label>
                    <input type="number" id="start_time" name="start_time" required min="0" step="1">
                </div>

                <div class="form-group">
                    <label for="end_time">End time (seconds):</label>
                    <input type="number" id="end_time" name="end_time" required min="1" step="1">
                </div>

                <div class="form-group">
                    <label for="upload_date_video">Upload date:</label>
                    <input type="text" id="upload_date_video" name="upload_date_video" value="{{ upload_date_video }}">
                </div>
                <div class="form-group">
                    <label for="channel_video">Channel:</label>
                    <input type="text" id="channel_video" name="channel_video" value="{{ channel_video }}" required>
                </div>
                <!-- <div class="form-group">
                    <label for="fps_video">FPS:</label>
                    <input type="text" id="fps_video" name="fps_video" value="{{ fps_video }}" required min="1" step="1" type="number" pattern="[0-9.]*">
                </div> -->
                <div class="form-group">
                    <label for="lat">Latitude:</label>
                    <input type="number" id="lat" name="lat" value="{{ existing_data['lat'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="lon">Longitude:</label>
                    <input type="number" id="lon" name="lon" value="{{ existing_data['lon'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="gmp">GDP city (billion USD):</label>
                    <input type="number" id="gmp" name="gmp" value="{{ existing_data['gmp'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="population_city">Population city:</label>
                    <input type="number" id="population_city" name="population_city" value="{{ existing_data['population_city'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="population_country">Population country:</label>
                    <input type="number" id="population_country" name="population_country" value="{{ existing_data['population_country'] }}" step="any">
                </div>

                <div class="form-group">
                    <label for="traffic_mortality">Traffic mortality:</label>
                    <input type="number" id="traffic_mortality" name="traffic_mortality" value="{{ existing_data['traffic_mortality'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="continent">Continent:</label>
                    <select id="continent" name="continent">
                        <option value="Africa" {% if existing_data['continent'] == 'Africa' %}selected{% endif %}>Africa</option>
                        <option value="Asia" {% if existing_data['continent'] == 'Asia' %}selected{% endif %}>Asia</option>
                        <option value="Europe" {% if existing_data['continent'] == 'Europe' %}selected{% endif %}>Europe</option>
                        <option value="South America" {% if existing_data['continent'] == 'South America' %}selected{% endif %}>South America</option>
                        <option value="North America" {% if existing_data['continent'] == 'North America' %}selected{% endif %}>North America</option>
                        <option value="Oceania" {% if existing_data['continent'] == 'Oceania' %}selected{% endif %}>Oceania</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="city_aka">Alt. names of city:</label>
                    <input id="city_aka" name="city_aka" value="{{ existing_data['city_aka'] }}">
                </div>
                <div class="form-group">
                    <label for="literacy_rate">Literacy rate:</label>
                    <input type="number" id="literacy_rate" name="literacy_rate" value="{{ existing_data['literacy_rate'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="avg_height">Average height:</label>
                    <input type="number" id="avg_height" name="avg_height" value="{{ existing_data['avg_height'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="med_age">Median age:</label>
                    <input type="number" id="med_age" name="med_age" value="{{ existing_data['med_age'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="gini">Gini index:</label>
                    <input type="number" id="gini" name="gini" value="{{ existing_data['gini'] }}" step="any">
                </div>
                <div class="form-group">
                    <label for="traffic_index">Traffic index:</label>
                    <input type="number" id="traffic_index" name="traffic_index" value="{{ existing_data['traffic_index'] }}" step="any">
                </div>
                <div class="form-group">
                    <button type="submit" name="submit_data">Submit</button>
                </div>
                <p class="videos-text"><strong>Videos:</strong> {{ existing_data['videos'] }}</p>
                <p class="videos-text"><strong>Time of day:</strong> {{ existing_data['time_of_day'] }}</p>
                <p class="videos-text"><strong>Vehicle:</strong> {{ existing_data['vehicle_type'] }}</p>
                <p class="videos-text"><strong>Start time:</strong> {{ existing_data['start_time'] }}</p>
                <p class="videos-text"><strong>End time:</strong> {{ existing_data['end_time'] }}</p>
                <p class="videos-text"><strong>Upload date:</strong> {{ existing_data['upload_date'] }}</p>
                <p class="videos-text"><strong>Channel:</strong> {{ existing_data['channel'] }}</p>
                <!-- <p class="videos-text"><strong>FPS list:</strong> {{ existing_data['fps_list'] }}</p> -->
            </form>
            {% endif %}
        </div>

        <div class="right">
            {% if video_id %}
                <!-- Embed the YouTube video only if a valid video ID is available -->
                <iframe id="embeddedVideo" src="https://www.youtube.com/embed/{{ video_id }}?start={{ timestamp }}&enablejsapi=1&autoplay=1&mute=1" frameborder="0" allowfullscreen allow="autoplay"></iframe>
                <p class="short_row">Current time: <span id="currentTime">0</span> s. <strong>ID:</strong> <span id="videoTitle">{{ video_id }}</span>. <strong>Upload date:</strong> <span id="videoUploadDate">{{ yt_upload_date }}</span>.</p>
                <p class="short_row"><strong>Start time</strong>: {{ start_time_video }}</p>
                <p class="short_row"><strong>End time</strong>: {{ end_time_video }}</p>
                <p class="short_row"><strong>Description:</strong> <span id="videoDescription">{{ yt_description }}</span></p>
                <!-- Map -->
                <div id="map"></div>
            {% endif %}
        </div>
    </div>
</body>
</html>